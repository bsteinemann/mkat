import{o as Ft,r as a,j as r,g as U,i as I,h as Te,k as g,l as Lt,m as he,n as B,s as $t,v as Ae,R as Kt,A as Gt,P as ne,w as Bt,x as ke,y as Vt,z as zt,C as Ut,F as Wt,D as qt,E as Ht,G as Xt,p as Re,u as re,B as S,I as Qt,t as y}from"./index-fQZ-U2x6.js";import{u as Oe}from"./useQuery-BewFOG_L.js";import{u as N}from"./useMutation-BOTsmzZA.js";import{g as R,C as P}from"./types-wJsVDGZp.js";import{c as E}from"./services--_aFGxDX.js";import{I as J}from"./input-BJMnUOvO.js";import{L as fe}from"./label-B2sNe2d1.js";import{u as Yt,S as Zt,a as Jt,b as en,c as tn,d as De}from"./select-kY1Lm6qJ.js";import{C as xe,c as ve}from"./card-BmoCGL6B.js";import{B as nn}from"./badge-BqSicr3y.js";import{S as K}from"./skeleton-C53g7VWF.js";import{A as rn,a as on}from"./alert-C3YZIm6s.js";import{A as Fe,a as sn,b as Le,c as $e,d as Ke,e as Ge,f as Be,g as Ve,h as ze}from"./alert-dialog-uLfenLJA.js";import{u as an,c as cn}from"./index-DPAcrdZo.js";import{c as Ue,I as ln,R as un}from"./index-B14eI_bF.js";const dn=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],pn=Ft("ellipsis",dn);function fn(e){const t=mn(e),n=a.forwardRef((o,s)=>{const{children:i,...l}=o,c=a.Children.toArray(i),u=c.find(xn);if(u){const f=u.props.children,p=c.map(d=>d===u?a.Children.count(f)>1?a.Children.only(null):a.isValidElement(f)?f.props.children:null:d);return r.jsx(t,{...l,ref:s,children:a.isValidElement(f)?a.cloneElement(f,void 0,p):null})}return r.jsx(t,{...l,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function mn(e){const t=a.forwardRef((n,o)=>{const{children:s,...i}=n;if(a.isValidElement(s)){const l=gn(s),c=vn(i,s.props);return s.type!==a.Fragment&&(c.ref=o?U(o,l):l),a.cloneElement(s,c)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var hn=Symbol("radix.slottable");function xn(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===hn}function vn(e,t){const n={...t};for(const o in t){const s=e[o],i=t[o];/^on[A-Z]/.test(o)?s&&i?n[o]=(...c)=>{const u=i(...c);return s(...c),u}:s&&(n[o]=s):o==="style"?n[o]={...s,...i}:o==="className"&&(n[o]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function gn(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Cn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],We=Cn.reduce((e,t)=>{const n=fn(`Primitive.${t}`),o=a.forwardRef((s,i)=>{const{asChild:l,...c}=s,u=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(u,{...c,ref:i})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),oe="Switch",[wn]=he(oe),[yn,Mn]=wn(oe),qe=a.forwardRef((e,t)=>{const{__scopeSwitch:n,name:o,checked:s,defaultChecked:i,required:l,disabled:c,value:u="on",onCheckedChange:f,form:p,...d}=e,[x,C]=a.useState(null),v=I(t,k=>C(k)),b=a.useRef(!1),j=x?p||!!x.closest("form"):!0,[m,ce]=Te({prop:s,defaultProp:i??!1,onChange:f,caller:oe});return r.jsxs(yn,{scope:n,checked:m,disabled:c,children:[r.jsx(We.button,{type:"button",role:"switch","aria-checked":m,"aria-required":l,"data-state":Ye(m),"data-disabled":c?"":void 0,disabled:c,value:u,...d,ref:v,onClick:g(e.onClick,k=>{ce(X=>!X),j&&(b.current=k.isPropagationStopped(),b.current||k.stopPropagation())})}),j&&r.jsx(Qe,{control:x,bubbles:!b.current,name:o,value:u,checked:m,required:l,disabled:c,form:p,style:{transform:"translateX(-100%)"}})]})});qe.displayName=oe;var He="SwitchThumb",Xe=a.forwardRef((e,t)=>{const{__scopeSwitch:n,...o}=e,s=Mn(He,n);return r.jsx(We.span,{"data-state":Ye(s.checked),"data-disabled":s.disabled?"":void 0,...o,ref:t})});Xe.displayName=He;var bn="SwitchBubbleInput",Qe=a.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:o=!0,...s},i)=>{const l=a.useRef(null),c=I(l,i),u=Yt(n),f=Lt(t);return a.useEffect(()=>{const p=l.current;if(!p)return;const d=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(d,"checked").set;if(u!==n&&C){const v=new Event("click",{bubbles:o});C.call(p,n),p.dispatchEvent(v)}},[u,n,o]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:c,style:{...s.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Qe.displayName=bn;function Ye(e){return e?"checked":"unchecked"}var jn=qe,Sn=Xe;function _n({className:e,size:t="default",...n}){return r.jsx(jn,{"data-slot":"switch","data-size":t,className:B("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 group/switch inline-flex shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-[1.15rem] data-[size=default]:w-8 data-[size=sm]:h-3.5 data-[size=sm]:w-6",e),...n,children:r.jsx(Sn,{"data-slot":"switch-thumb",className:B("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block rounded-full ring-0 transition-transform group-data-[size=default]/switch:size-4 group-data-[size=sm]/switch:size-3 data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function En(e){const t=Nn(e),n=a.forwardRef((o,s)=>{const{children:i,...l}=o,c=a.Children.toArray(i),u=c.find(Dn);if(u){const f=u.props.children,p=c.map(d=>d===u?a.Children.count(f)>1?a.Children.only(null):a.isValidElement(f)?f.props.children:null:d);return r.jsx(t,{...l,ref:s,children:a.isValidElement(f)?a.cloneElement(f,void 0,p):null})}return r.jsx(t,{...l,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function Nn(e){const t=a.forwardRef((n,o)=>{const{children:s,...i}=n;if(a.isValidElement(s)){const l=In(s),c=Pn(i,s.props);return s.type!==a.Fragment&&(c.ref=o?U(o,l):l),a.cloneElement(s,c)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Rn=Symbol("radix.slottable");function Dn(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Rn}function Pn(e,t){const n={...t};for(const o in t){const s=e[o],i=t[o];/^on[A-Z]/.test(o)?s&&i?n[o]=(...c)=>{const u=i(...c);return s(...c),u}:s&&(n[o]=s):o==="style"?n[o]={...s,...i}:o==="className"&&(n[o]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function In(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Tn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],An=Tn.reduce((e,t)=>{const n=En(`Primitive.${t}`),o=a.forwardRef((s,i)=>{const{asChild:l,...c}=s,u=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(u,{...c,ref:i})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{});function Ze(e){const t=kn(e),n=a.forwardRef((o,s)=>{const{children:i,...l}=o,c=a.Children.toArray(i),u=c.find(Fn);if(u){const f=u.props.children,p=c.map(d=>d===u?a.Children.count(f)>1?a.Children.only(null):a.isValidElement(f)?f.props.children:null:d);return r.jsx(t,{...l,ref:s,children:a.isValidElement(f)?a.cloneElement(f,void 0,p):null})}return r.jsx(t,{...l,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function kn(e){const t=a.forwardRef((n,o)=>{const{children:s,...i}=n;if(a.isValidElement(s)){const l=$n(s),c=Ln(i,s.props);return s.type!==a.Fragment&&(c.ref=o?U(o,l):l),a.cloneElement(s,c)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var On=Symbol("radix.slottable");function Fn(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===On}function Ln(e,t){const n={...t};for(const o in t){const s=e[o],i=t[o];/^on[A-Z]/.test(o)?s&&i?n[o]=(...c)=>{const u=i(...c);return s(...c),u}:s&&(n[o]=s):o==="style"?n[o]={...s,...i}:o==="className"&&(n[o]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function $n(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Kn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],W=Kn.reduce((e,t)=>{const n=Ze(`Primitive.${t}`),o=a.forwardRef((s,i)=>{const{asChild:l,...c}=s,u=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(u,{...c,ref:i})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{});function Gn(e,t){e&&$t.flushSync(()=>e.dispatchEvent(t))}var me=["Enter"," "],Bn=["ArrowDown","PageUp","Home"],Je=["ArrowUp","PageDown","End"],Vn=[...Bn,...Je],zn={ltr:[...me,"ArrowRight"],rtl:[...me,"ArrowLeft"]},Un={ltr:["ArrowLeft"],rtl:["ArrowRight"]},q="Menu",[V,Wn,qn]=cn(q),[T,et]=he(q,[qn,ke,Ue]),se=ke(),tt=Ue(),[Hn,A]=T(q),[Xn,H]=T(q),nt=e=>{const{__scopeMenu:t,open:n=!1,children:o,dir:s,onOpenChange:i,modal:l=!0}=e,c=se(t),[u,f]=a.useState(null),p=a.useRef(!1),d=Ae(i),x=an(s);return a.useEffect(()=>{const C=()=>{p.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>p.current=!1;return document.addEventListener("keydown",C,{capture:!0}),()=>{document.removeEventListener("keydown",C,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),r.jsx(Kt,{...c,children:r.jsx(Hn,{scope:t,open:n,onOpenChange:d,content:u,onContentChange:f,children:r.jsx(Xn,{scope:t,onClose:a.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:p,dir:x,modal:l,children:o})})})};nt.displayName=q;var Qn="MenuAnchor",ge=a.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,s=se(n);return r.jsx(Gt,{...s,...o,ref:t})});ge.displayName=Qn;var Ce="MenuPortal",[Yn,rt]=T(Ce,{forceMount:void 0}),ot=e=>{const{__scopeMenu:t,forceMount:n,children:o,container:s}=e,i=A(Ce,t);return r.jsx(Yn,{scope:t,forceMount:n,children:r.jsx(ne,{present:n||i.open,children:r.jsx(Bt,{asChild:!0,container:s,children:o})})})};ot.displayName=Ce;var _="MenuContent",[Zn,we]=T(_),st=a.forwardRef((e,t)=>{const n=rt(_,e.__scopeMenu),{forceMount:o=n.forceMount,...s}=e,i=A(_,e.__scopeMenu),l=H(_,e.__scopeMenu);return r.jsx(V.Provider,{scope:e.__scopeMenu,children:r.jsx(ne,{present:o||i.open,children:r.jsx(V.Slot,{scope:e.__scopeMenu,children:l.modal?r.jsx(Jn,{...s,ref:t}):r.jsx(er,{...s,ref:t})})})})}),Jn=a.forwardRef((e,t)=>{const n=A(_,e.__scopeMenu),o=a.useRef(null),s=I(t,o);return a.useEffect(()=>{const i=o.current;if(i)return Vt(i)},[]),r.jsx(ye,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:g(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),er=a.forwardRef((e,t)=>{const n=A(_,e.__scopeMenu);return r.jsx(ye,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),tr=Ze("MenuContent.ScrollLock"),ye=a.forwardRef((e,t)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEntryFocus:u,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:d,onInteractOutside:x,onDismiss:C,disableOutsideScroll:v,...b}=e,j=A(_,n),m=H(_,n),ce=se(n),k=tt(n),X=Wn(n),[Pt,Se]=a.useState(null),Q=a.useRef(null),It=I(t,Q,j.onContentChange),Y=a.useRef(0),Z=a.useRef(""),Tt=a.useRef(0),le=a.useRef(null),_e=a.useRef("right"),ue=a.useRef(0),At=v?Ut:a.Fragment,kt=v?{as:tr,allowPinchZoom:!0}:void 0,Ot=h=>{const F=Z.current+h,D=X().filter(M=>!M.disabled),L=document.activeElement,de=D.find(M=>M.ref.current===L)?.textValue,pe=D.map(M=>M.textValue),Ee=fr(pe,F,de),$=D.find(M=>M.textValue===Ee)?.ref.current;(function M(Ne){Z.current=Ne,window.clearTimeout(Y.current),Ne!==""&&(Y.current=window.setTimeout(()=>M(""),1e3))})(F),$&&setTimeout(()=>$.focus())};a.useEffect(()=>()=>window.clearTimeout(Y.current),[]),zt();const O=a.useCallback(h=>_e.current===le.current?.side&&hr(h,le.current?.area),[]);return r.jsx(Zn,{scope:n,searchRef:Z,onItemEnter:a.useCallback(h=>{O(h)&&h.preventDefault()},[O]),onItemLeave:a.useCallback(h=>{O(h)||(Q.current?.focus(),Se(null))},[O]),onTriggerLeave:a.useCallback(h=>{O(h)&&h.preventDefault()},[O]),pointerGraceTimerRef:Tt,onPointerGraceIntentChange:a.useCallback(h=>{le.current=h},[]),children:r.jsx(At,{...kt,children:r.jsx(Wt,{asChild:!0,trapped:s,onMountAutoFocus:g(i,h=>{h.preventDefault(),Q.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:r.jsx(qt,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:d,onInteractOutside:x,onDismiss:C,children:r.jsx(un,{asChild:!0,...k,dir:m.dir,orientation:"vertical",loop:o,currentTabStopId:Pt,onCurrentTabStopIdChange:Se,onEntryFocus:g(u,h=>{m.isUsingKeyboardRef.current||h.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(Ht,{role:"menu","aria-orientation":"vertical","data-state":yt(j.open),"data-radix-menu-content":"",dir:m.dir,...ce,...b,ref:It,style:{outline:"none",...b.style},onKeyDown:g(b.onKeyDown,h=>{const D=h.target.closest("[data-radix-menu-content]")===h.currentTarget,L=h.ctrlKey||h.altKey||h.metaKey,de=h.key.length===1;D&&(h.key==="Tab"&&h.preventDefault(),!L&&de&&Ot(h.key));const pe=Q.current;if(h.target!==pe||!Vn.includes(h.key))return;h.preventDefault();const $=X().filter(M=>!M.disabled).map(M=>M.ref.current);Je.includes(h.key)&&$.reverse(),dr($)}),onBlur:g(e.onBlur,h=>{h.currentTarget.contains(h.target)||(window.clearTimeout(Y.current),Z.current="")}),onPointerMove:g(e.onPointerMove,z(h=>{const F=h.target,D=ue.current!==h.clientX;if(h.currentTarget.contains(F)&&D){const L=h.clientX>ue.current?"right":"left";_e.current=L,ue.current=h.clientX}}))})})})})})})});st.displayName=_;var nr="MenuGroup",Me=a.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return r.jsx(W.div,{role:"group",...o,ref:t})});Me.displayName=nr;var rr="MenuLabel",at=a.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return r.jsx(W.div,{...o,ref:t})});at.displayName=rr;var ee="MenuItem",Pe="menu.itemSelect",ae=a.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:o,...s}=e,i=a.useRef(null),l=H(ee,e.__scopeMenu),c=we(ee,e.__scopeMenu),u=I(t,i),f=a.useRef(!1),p=()=>{const d=i.current;if(!n&&d){const x=new CustomEvent(Pe,{bubbles:!0,cancelable:!0});d.addEventListener(Pe,C=>o?.(C),{once:!0}),Gn(d,x),x.defaultPrevented?f.current=!1:l.onClose()}};return r.jsx(it,{...s,ref:u,disabled:n,onClick:g(e.onClick,p),onPointerDown:d=>{e.onPointerDown?.(d),f.current=!0},onPointerUp:g(e.onPointerUp,d=>{f.current||d.currentTarget?.click()}),onKeyDown:g(e.onKeyDown,d=>{const x=c.searchRef.current!=="";n||x&&d.key===" "||me.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});ae.displayName=ee;var it=a.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:o=!1,textValue:s,...i}=e,l=we(ee,n),c=tt(n),u=a.useRef(null),f=I(t,u),[p,d]=a.useState(!1),[x,C]=a.useState("");return a.useEffect(()=>{const v=u.current;v&&C((v.textContent??"").trim())},[i.children]),r.jsx(V.ItemSlot,{scope:n,disabled:o,textValue:s??x,children:r.jsx(ln,{asChild:!0,...c,focusable:!o,children:r.jsx(W.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...i,ref:f,onPointerMove:g(e.onPointerMove,z(v=>{o?l.onItemLeave(v):(l.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:g(e.onPointerLeave,z(v=>l.onItemLeave(v))),onFocus:g(e.onFocus,()=>d(!0)),onBlur:g(e.onBlur,()=>d(!1))})})})}),or="MenuCheckboxItem",ct=a.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:o,...s}=e;return r.jsx(ft,{scope:e.__scopeMenu,checked:n,children:r.jsx(ae,{role:"menuitemcheckbox","aria-checked":te(n)?"mixed":n,...s,ref:t,"data-state":je(n),onSelect:g(s.onSelect,()=>o?.(te(n)?!0:!n),{checkForDefaultPrevented:!1})})})});ct.displayName=or;var lt="MenuRadioGroup",[sr,ar]=T(lt,{value:void 0,onValueChange:()=>{}}),ut=a.forwardRef((e,t)=>{const{value:n,onValueChange:o,...s}=e,i=Ae(o);return r.jsx(sr,{scope:e.__scopeMenu,value:n,onValueChange:i,children:r.jsx(Me,{...s,ref:t})})});ut.displayName=lt;var dt="MenuRadioItem",pt=a.forwardRef((e,t)=>{const{value:n,...o}=e,s=ar(dt,e.__scopeMenu),i=n===s.value;return r.jsx(ft,{scope:e.__scopeMenu,checked:i,children:r.jsx(ae,{role:"menuitemradio","aria-checked":i,...o,ref:t,"data-state":je(i),onSelect:g(o.onSelect,()=>s.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});pt.displayName=dt;var be="MenuItemIndicator",[ft,ir]=T(be,{checked:!1}),mt=a.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:o,...s}=e,i=ir(be,n);return r.jsx(ne,{present:o||te(i.checked)||i.checked===!0,children:r.jsx(W.span,{...s,ref:t,"data-state":je(i.checked)})})});mt.displayName=be;var cr="MenuSeparator",ht=a.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return r.jsx(W.div,{role:"separator","aria-orientation":"horizontal",...o,ref:t})});ht.displayName=cr;var lr="MenuArrow",xt=a.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,s=se(n);return r.jsx(Xt,{...s,...o,ref:t})});xt.displayName=lr;var ur="MenuSub",[Ro,vt]=T(ur),G="MenuSubTrigger",gt=a.forwardRef((e,t)=>{const n=A(G,e.__scopeMenu),o=H(G,e.__scopeMenu),s=vt(G,e.__scopeMenu),i=we(G,e.__scopeMenu),l=a.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:u}=i,f={__scopeMenu:e.__scopeMenu},p=a.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return a.useEffect(()=>p,[p]),a.useEffect(()=>{const d=c.current;return()=>{window.clearTimeout(d),u(null)}},[c,u]),r.jsx(ge,{asChild:!0,...f,children:r.jsx(it,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":yt(n.open),...e,ref:U(t,s.onTriggerChange),onClick:d=>{e.onClick?.(d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:g(e.onPointerMove,z(d=>{i.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),p()},100))})),onPointerLeave:g(e.onPointerLeave,z(d=>{p();const x=n.content?.getBoundingClientRect();if(x){const C=n.content?.dataset.side,v=C==="right",b=v?-5:5,j=x[v?"left":"right"],m=x[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+b,y:d.clientY},{x:j,y:x.top},{x:m,y:x.top},{x:m,y:x.bottom},{x:j,y:x.bottom}],side:C}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:g(e.onKeyDown,d=>{const x=i.searchRef.current!=="";e.disabled||x&&d.key===" "||zn[o.dir].includes(d.key)&&(n.onOpenChange(!0),n.content?.focus(),d.preventDefault())})})})});gt.displayName=G;var Ct="MenuSubContent",wt=a.forwardRef((e,t)=>{const n=rt(_,e.__scopeMenu),{forceMount:o=n.forceMount,...s}=e,i=A(_,e.__scopeMenu),l=H(_,e.__scopeMenu),c=vt(Ct,e.__scopeMenu),u=a.useRef(null),f=I(t,u);return r.jsx(V.Provider,{scope:e.__scopeMenu,children:r.jsx(ne,{present:o||i.open,children:r.jsx(V.Slot,{scope:e.__scopeMenu,children:r.jsx(ye,{id:c.contentId,"aria-labelledby":c.triggerId,...s,ref:f,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{l.isUsingKeyboardRef.current&&u.current?.focus(),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:g(e.onFocusOutside,p=>{p.target!==c.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:g(e.onEscapeKeyDown,p=>{l.onClose(),p.preventDefault()}),onKeyDown:g(e.onKeyDown,p=>{const d=p.currentTarget.contains(p.target),x=Un[l.dir].includes(p.key);d&&x&&(i.onOpenChange(!1),c.trigger?.focus(),p.preventDefault())})})})})})});wt.displayName=Ct;function yt(e){return e?"open":"closed"}function te(e){return e==="indeterminate"}function je(e){return te(e)?"indeterminate":e?"checked":"unchecked"}function dr(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function pr(e,t){return e.map((n,o)=>e[(t+o)%e.length])}function fr(e,t,n){const s=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let l=pr(e,Math.max(i,0));s.length===1&&(l=l.filter(f=>f!==n));const u=l.find(f=>f.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function mr(e,t){const{x:n,y:o}=e;let s=!1;for(let i=0,l=t.length-1;i<t.length;l=i++){const c=t[i],u=t[l],f=c.x,p=c.y,d=u.x,x=u.y;p>o!=x>o&&n<(d-f)*(o-p)/(x-p)+f&&(s=!s)}return s}function hr(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return mr(n,t)}function z(e){return t=>t.pointerType==="mouse"?e(t):void 0}var xr=nt,vr=ge,gr=ot,Cr=st,wr=Me,yr=at,Mr=ae,br=ct,jr=ut,Sr=pt,_r=mt,Er=ht,Nr=xt,Rr=gt,Dr=wt,ie="DropdownMenu",[Pr]=he(ie,[et]),w=et(),[Ir,Mt]=Pr(ie),bt=e=>{const{__scopeDropdownMenu:t,children:n,dir:o,open:s,defaultOpen:i,onOpenChange:l,modal:c=!0}=e,u=w(t),f=a.useRef(null),[p,d]=Te({prop:s,defaultProp:i??!1,onChange:l,caller:ie});return r.jsx(Ir,{scope:t,triggerId:Re(),triggerRef:f,contentId:Re(),open:p,onOpenChange:d,onOpenToggle:a.useCallback(()=>d(x=>!x),[d]),modal:c,children:r.jsx(xr,{...u,open:p,onOpenChange:d,dir:o,modal:c,children:n})})};bt.displayName=ie;var jt="DropdownMenuTrigger",St=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...s}=e,i=Mt(jt,n),l=w(n);return r.jsx(vr,{asChild:!0,...l,children:r.jsx(An.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...s,ref:U(t,i.triggerRef),onPointerDown:g(e.onPointerDown,c=>{!o&&c.button===0&&c.ctrlKey===!1&&(i.onOpenToggle(),i.open||c.preventDefault())}),onKeyDown:g(e.onKeyDown,c=>{o||(["Enter"," "].includes(c.key)&&i.onOpenToggle(),c.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});St.displayName=jt;var Tr="DropdownMenuPortal",_t=e=>{const{__scopeDropdownMenu:t,...n}=e,o=w(t);return r.jsx(gr,{...o,...n})};_t.displayName=Tr;var Et="DropdownMenuContent",Nt=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=Mt(Et,n),i=w(n),l=a.useRef(!1);return r.jsx(Cr,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...o,ref:t,onCloseAutoFocus:g(e.onCloseAutoFocus,c=>{l.current||s.triggerRef.current?.focus(),l.current=!1,c.preventDefault()}),onInteractOutside:g(e.onInteractOutside,c=>{const u=c.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,p=u.button===2||f;(!s.modal||p)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Nt.displayName=Et;var Ar="DropdownMenuGroup",kr=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=w(n);return r.jsx(wr,{...s,...o,ref:t})});kr.displayName=Ar;var Or="DropdownMenuLabel",Fr=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=w(n);return r.jsx(yr,{...s,...o,ref:t})});Fr.displayName=Or;var Lr="DropdownMenuItem",Rt=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=w(n);return r.jsx(Mr,{...s,...o,ref:t})});Rt.displayName=Lr;var $r="DropdownMenuCheckboxItem",Kr=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=w(n);return r.jsx(br,{...s,...o,ref:t})});Kr.displayName=$r;var Gr="DropdownMenuRadioGroup",Br=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=w(n);return r.jsx(jr,{...s,...o,ref:t})});Br.displayName=Gr;var Vr="DropdownMenuRadioItem",zr=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=w(n);return r.jsx(Sr,{...s,...o,ref:t})});zr.displayName=Vr;var Ur="DropdownMenuItemIndicator",Wr=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=w(n);return r.jsx(_r,{...s,...o,ref:t})});Wr.displayName=Ur;var qr="DropdownMenuSeparator",Dt=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=w(n);return r.jsx(Er,{...s,...o,ref:t})});Dt.displayName=qr;var Hr="DropdownMenuArrow",Xr=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=w(n);return r.jsx(Nr,{...s,...o,ref:t})});Xr.displayName=Hr;var Qr="DropdownMenuSubTrigger",Yr=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=w(n);return r.jsx(Rr,{...s,...o,ref:t})});Yr.displayName=Qr;var Zr="DropdownMenuSubContent",Jr=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=w(n);return r.jsx(Dr,{...s,...o,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Jr.displayName=Zr;var eo=bt,to=St,no=_t,ro=Nt,oo=Rt,so=Dt;function ao({...e}){return r.jsx(eo,{"data-slot":"dropdown-menu",...e})}function io({...e}){return r.jsx(to,{"data-slot":"dropdown-menu-trigger",...e})}function co({className:e,sideOffset:t=4,...n}){return r.jsx(no,{children:r.jsx(ro,{"data-slot":"dropdown-menu-content",sideOffset:t,className:B("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function Ie({className:e,inset:t,variant:n="default",...o}){return r.jsx(oo,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:B("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...o})}function lo({className:e,...t}){return r.jsx(so,{"data-slot":"dropdown-menu-separator",className:B("bg-border -mx-1 my-1 h-px",e),...t})}function Do(){const e=re(),[t,n]=a.useState(!1),[o,s]=a.useState(null),{data:i,isLoading:l}=Oe({queryKey:["contacts"],queryFn:()=>E.list()}),c=N({mutationFn:u=>E.delete(u),onSuccess:()=>{e.invalidateQueries({queryKey:["contacts"]}),y.success("Contact deleted")},onError:u=>{y.error(R(u,"Failed to delete contact"))}});return l?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(K,{className:"h-8 w-32"}),r.jsx(K,{className:"h-9 w-28 rounded-md"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(K,{className:"h-20 w-full rounded-lg"}),r.jsx(K,{className:"h-20 w-full rounded-lg"}),r.jsx(K,{className:"h-20 w-full rounded-lg"})]})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Contacts"}),r.jsx(S,{onClick:()=>n(!0),children:"Add Contact"})]}),t&&r.jsx(uo,{onClose:()=>n(!1)}),o&&r.jsx(po,{contact:o,onClose:()=>s(null)}),i?.length===0?r.jsxs(rn,{children:[r.jsx(Qt,{className:"h-4 w-4"}),r.jsx(on,{children:"No contacts configured. Add a contact to set up notification routing."})]}):r.jsx("div",{className:"space-y-3",children:i?.map(u=>r.jsx(xe,{className:"py-0",children:r.jsx(ve,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-lg font-semibold text-foreground",children:u.name}),u.isDefault&&r.jsx(nn,{variant:"secondary",className:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:"Default"})]}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[u.channels.length," channel",u.channels.length!==1?"s":""," |"," ",u.serviceCount," service",u.serviceCount!==1?"s":""]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(S,{variant:"secondary",size:"sm",onClick:()=>s(u),children:"Manage"}),!u.isDefault&&r.jsxs(Fe,{children:[r.jsx(sn,{asChild:!0,children:r.jsx(S,{variant:"destructive",size:"sm",children:"Delete"})}),r.jsxs(Le,{children:[r.jsxs($e,{children:[r.jsxs(Ke,{children:['Delete contact "',u.name,'"?']}),r.jsx(Ge,{children:"This will remove the contact and all its channels."})]}),r.jsxs(Be,{children:[r.jsx(Ve,{children:"Cancel"}),r.jsx(ze,{onClick:()=>c.mutate(u.id),children:"Delete"})]})]})]})]})]})})},u.id))})]})}function uo({onClose:e,contact:t}){const n=re(),[o,s]=a.useState(t?.name??""),i=N({mutationFn:c=>E.create(c),onSuccess:()=>{n.invalidateQueries({queryKey:["contacts"]}),y.success("Contact created"),e()},onError:c=>{y.error(R(c,"Failed to create contact"))}}),l=N({mutationFn:c=>E.update(t.id,c),onSuccess:()=>{n.invalidateQueries({queryKey:["contacts"]}),y.success("Contact updated"),e()},onError:c=>{y.error(R(c,"Failed to update contact"))}});return r.jsx(xe,{className:"border-blue-200 dark:border-blue-800 py-0",children:r.jsxs(ve,{className:"p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:t?"Edit Contact":"New Contact"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(J,{type:"text",value:o,onChange:c=>s(c.target.value),placeholder:"Contact name",className:"flex-1"}),r.jsx(S,{onClick:()=>t?l.mutate(o):i.mutate(o),disabled:!o.trim(),children:t?"Save":"Create"}),r.jsx(S,{variant:"ghost",onClick:e,children:"Cancel"})]})]})})}function po({contact:e,onClose:t}){const n=re(),[o,s]=a.useState(!1),[i,l]=a.useState(!1),[c,u]=a.useState(e.name),[f,p]=a.useState(null),{data:d}=Oe({queryKey:["contacts",e.id],queryFn:()=>E.get(e.id),initialData:e}),x=N({mutationFn:m=>E.update(e.id,m),onSuccess:()=>{n.invalidateQueries({queryKey:["contacts"]}),l(!1)},onError:m=>{y.error(R(m,"Failed to update contact name"))}}),C=N({mutationFn:m=>E.deleteChannel(e.id,m),onSuccess:()=>{n.invalidateQueries({queryKey:["contacts"]}),y.success("Channel removed")},onError:m=>{y.error(R(m,"Failed to remove channel"))}}),v=N({mutationFn:m=>E.updateChannel(e.id,m.id,m.configuration,!m.isEnabled),onSuccess:()=>n.invalidateQueries({queryKey:["contacts"]}),onError:m=>{y.error(R(m,"Failed to update channel"))}}),b=N({mutationFn:m=>E.testChannel(e.id,m),onSuccess:()=>{y.success("Test notification sent")},onError:m=>{y.error(R(m,"Failed to send test notification"))}}),j=d??e;return r.jsx(xe,{className:"border-blue-200 dark:border-blue-800 py-0",children:r.jsxs(ve,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i?r.jsxs("div",{className:"flex gap-2",children:[r.jsx(J,{type:"text",value:c,onChange:m=>u(m.target.value),className:"h-8"}),r.jsx(S,{size:"sm",onClick:()=>x.mutate(c),children:"Save"})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-lg font-semibold",children:j.name}),r.jsx(S,{variant:"link",size:"sm",className:"p-0 h-auto",onClick:()=>l(!0),children:"Edit"})]}),r.jsx(S,{variant:"ghost",size:"sm",onClick:t,children:"Close"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-medium text-foreground",children:"Channels"}),r.jsx(S,{variant:"link",size:"sm",className:"p-0 h-auto",onClick:()=>s(!0),children:"+ Add Channel"})]}),o&&r.jsx(fo,{contactId:e.id,onClose:()=>s(!1)}),j.channels.length===0?r.jsx("p",{className:"text-sm text-muted-foreground",children:"No channels configured."}):j.channels.map(m=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm font-medium",children:m.type===P.Telegram?"Telegram":"Email"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_n,{checked:m.isEnabled,onCheckedChange:()=>v.mutate(m)}),r.jsx("span",{className:`text-xs ${m.isEnabled?"text-green-600 dark:text-green-400":"text-muted-foreground"}`,children:m.isEnabled?"Enabled":"Disabled"})]})]}),r.jsxs(ao,{children:[r.jsx(io,{asChild:!0,children:r.jsx(S,{variant:"ghost",size:"icon",className:"h-8 w-8",children:r.jsx(pn,{className:"h-4 w-4"})})}),r.jsxs(co,{align:"end",children:[r.jsx(Ie,{onClick:()=>b.mutate(m.id),children:"Send Test"}),r.jsx(lo,{}),r.jsx(Ie,{className:"text-red-600 focus:text-red-600",onClick:()=>p(m.id),children:"Remove"})]})]})]},m.id)),r.jsx(Fe,{open:!!f,onOpenChange:()=>p(null),children:r.jsxs(Le,{children:[r.jsxs($e,{children:[r.jsx(Ke,{children:"Remove this channel?"}),r.jsx(Ge,{children:"This will stop notifications via this channel."})]}),r.jsxs(Be,{children:[r.jsx(Ve,{children:"Cancel"}),r.jsx(ze,{onClick:()=>{f&&C.mutate(f)},children:"Remove"})]})]})})]})]})})}function fo({contactId:e,onClose:t}){const n=re(),[o,s]=a.useState(P.Telegram),[i,l]=a.useState(""),[c,u]=a.useState(""),f=N({mutationFn:()=>{const p=o===P.Telegram?JSON.stringify({botToken:i,chatId:c}):"{}";return E.addChannel(e,o,p)},onSuccess:()=>{n.invalidateQueries({queryKey:["contacts"]}),y.success("Channel added"),t()},onError:p=>{y.error(R(p,"Failed to add channel"))}});return r.jsxs("div",{className:"p-3 border rounded space-y-3",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Type"}),r.jsxs(Zt,{value:String(o),onValueChange:p=>s(Number(p)),children:[r.jsx(Jt,{className:"w-full",children:r.jsx(en,{})}),r.jsxs(tn,{children:[r.jsx(De,{value:String(P.Telegram),children:"Telegram"}),r.jsx(De,{value:String(P.Email),children:"Email"})]})]})]}),o===P.Telegram&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Bot Token"}),r.jsx(J,{type:"text",value:i,onChange:p=>l(p.target.value),placeholder:"123456:ABC-DEF...",className:"text-sm"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fe,{children:"Chat ID"}),r.jsx(J,{type:"text",value:c,onChange:p=>u(p.target.value),placeholder:"-100123456789",className:"text-sm"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(S,{size:"sm",onClick:()=>f.mutate(),disabled:o===P.Telegram&&(!i||!c),children:"Add Channel"}),r.jsx(S,{variant:"ghost",size:"sm",onClick:t,children:"Cancel"})]})]})}export{Do as Contacts};
