import{j as e,L as n,B as c,r as p,u as j,b as f,I as v}from"./index-fQZ-U2x6.js";import{u as g}from"./useQuery-BewFOG_L.js";import{u as m}from"./useMutation-BOTsmzZA.js";import{s as l}from"./services--_aFGxDX.js";import{S as y,a as i}from"./types-wJsVDGZp.js";import{S as b}from"./StateIndicator-CC9lMCtR.js";import{C as N,c as w}from"./card-BmoCGL6B.js";import{f as k}from"./formatDistanceToNow-BIWrupWh.js";import{P as S}from"./Pagination-CR2eRW7k.js";import{S as r}from"./skeleton-C53g7VWF.js";import{A as C,a as I}from"./alert-C3YZIm6s.js";const P={[i.Low]:"border-green-200 dark:border-green-800",[i.Medium]:"border-yellow-200 dark:border-yellow-800",[i.High]:"border-orange-200 dark:border-orange-800",[i.Critical]:"border-red-200 dark:border-red-800"};function A({service:s,onPause:d,onResume:a}){return e.jsx(N,{className:`border-l-4 ${P[s.severity]} py-0`,children:e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(n,{to:"/services/$serviceId",params:{serviceId:s.id},className:"text-lg font-semibold text-foreground hover:text-blue-600 dark:hover:text-blue-400",children:s.name}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.description})]}),e.jsx(b,{state:s.state})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Updated ",k(new Date(s.updatedAt))," ago"]}),e.jsxs("div",{className:"flex gap-2",children:[s.state!==y.Paused?e.jsx(c,{variant:"ghost",size:"sm",className:"p-0 h-auto text-yellow-600 dark:text-yellow-400 hover:text-yellow-800 dark:hover:text-yellow-300 hover:bg-transparent",onClick:d,children:"Pause"}):e.jsx(c,{variant:"ghost",size:"sm",className:"p-0 h-auto text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 hover:bg-transparent",onClick:a,children:"Resume"}),e.jsx(n,{to:"/services/$serviceId/edit",params:{serviceId:s.id},className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:"Edit"})]})]})]})})}function B(){const[s,d]=p.useState(1),a=j(),{data:o,isLoading:u}=g({queryKey:["services",s],queryFn:()=>l.list(s,20)}),x=m({mutationFn:t=>l.pause(t),onSuccess:()=>a.invalidateQueries({queryKey:["services"]})}),h=m({mutationFn:t=>l.resume(t),onSuccess:()=>a.invalidateQueries({queryKey:["services"]})});return u?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{className:"h-8 w-32"}),e.jsx(r,{className:"h-9 w-28 rounded-md"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(r,{className:"h-24 w-full rounded-lg"}),e.jsx(r,{className:"h-24 w-full rounded-lg"}),e.jsx(r,{className:"h-24 w-full rounded-lg"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Services"}),e.jsx(n,{to:"/services/new",className:f(),children:"Add Service"})]}),o?.items.length===0?e.jsxs(C,{children:[e.jsx(v,{className:"h-4 w-4"}),e.jsxs(I,{children:["No services configured yet."," ",e.jsx(n,{to:"/services/new",className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline",children:"Create your first service"})]})]}):e.jsx("div",{className:"space-y-4",children:o?.items.map(t=>e.jsx(A,{service:t,onPause:()=>x.mutate(t.id),onResume:()=>h.mutate(t.id)},t.id))}),o&&e.jsx(S,{page:s,totalCount:o.totalCount,pageSize:20,onPageChange:d})]})}export{B as Services};
