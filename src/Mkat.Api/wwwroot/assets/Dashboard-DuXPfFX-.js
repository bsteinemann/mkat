import{j as e}from"./index-fQZ-U2x6.js";import{u as m}from"./useQuery-BewFOG_L.js";import{s as j}from"./services--_aFGxDX.js";import{A as h,a as f}from"./AlertItem-xaGF1g_8.js";import{S as t}from"./types-wJsVDGZp.js";import{S as u}from"./StateIndicator-CC9lMCtR.js";import{C as l,a as x,b as p,c as i}from"./card-BmoCGL6B.js";import"./badge-BqSicr3y.js";import"./formatDistanceToNow-BIWrupWh.js";function U(){const{data:n}=m({queryKey:["services"],queryFn:()=>j.list(1,100),refetchInterval:3e4}),{data:d}=m({queryKey:["alerts","recent"],queryFn:()=>f.list(1,5),refetchInterval:3e4}),a=n?.items??[],o=d?.items??[],r={up:a.filter(s=>s.state===t.Up).length,down:a.filter(s=>s.state===t.Down).length,paused:a.filter(s=>s.state===t.Paused).length,unknown:a.filter(s=>s.state===t.Unknown).length};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Dashboard"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsx(c,{state:t.Up,count:r.up}),e.jsx(c,{state:t.Down,count:r.down}),e.jsx(c,{state:t.Paused,count:r.paused}),e.jsx(c,{state:t.Unknown,count:r.unknown})]}),e.jsxs(l,{className:"py-0",children:[e.jsx(x,{children:e.jsx(p,{className:"text-lg",children:"Recent Alerts"})}),e.jsx(i,{children:o.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No recent alerts"}):e.jsx("div",{className:"space-y-3",children:o.map(s=>e.jsx(h,{alert:s},s.id))})})]}),r.down>0&&e.jsxs(l,{className:"bg-red-50 dark:bg-red-950 border-red-200 dark:border-red-800 py-0",children:[e.jsx(x,{children:e.jsxs(p,{className:"text-lg text-red-800 dark:text-red-200",children:["Services Down (",r.down,")"]})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-2",children:a.filter(s=>s.state===t.Down).map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx(u,{state:s.state,size:"sm"})]},s.id))})})]})]})}function c({state:n,count:d}){const a={[t.Up]:"Up",[t.Down]:"Down",[t.Paused]:"Paused",[t.Unknown]:"Unknown"};return e.jsx(l,{className:"py-0",children:e.jsxs(i,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{state:n}),e.jsx("span",{className:"text-3xl font-bold",children:d})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[a[n]," Services"]})]})})}export{U as Dashboard};
